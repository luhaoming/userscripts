# 快樂工具人: 正式區防呆小幫手 (Prod Guard) 🛡️

> **「我的品牌是快樂工具人，我的使命是讓你不要手賤。」**
>
> 這是專為「不想成為離職高手」的工程師開發的 UserScript。它能在網頁上提供醒目的環境標識，並在正式區執行刪除操作時強制攔截確認。

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

---

## 🚨 重要：安裝後必讀！

**這支腳本安裝後預設是「休眠狀態」！**
為了避免干擾你的日常瀏覽，本工具採用「白名單」機制。你必須手動告訴腳本：「嘿，這個網域是我的工作環境」，它才會啟動。

### 🚀 30 秒快速設定教學

#### 步驟 1：開啟設定選單
在任何網頁上，點擊瀏覽器右上角的 **Tampermonkey (油猴) 圖示**，你會看到腳本下方有幾個設定選項：

```text
┌──────────────────────────────┐
│ ⚫ Tampermonkey               │
├──────────────────────────────┤
│ 🟢 快樂工具人: 正式區防呆...    │
│                              │
│  🔧 設定 根網域 (*.aa.bb)     │  <-- 點擊這裡！(第一步)
│  🔧 設定 STG 網域             │
│  🔧 設定 DEV 網域             │
│  📤 匯出設定 (複製)           │
│  📥 匯入設定                 │
│  🔍 查看目前設定              │
└──────────────────────────────┘

```

#### 步驟 2：設定「根網域 (Roots)」(最關鍵！)

點擊 **「🔧 設定 根網域」**，輸入你公司系統的網域特徵。

* 這是腳本的**啟動開關**。只有網址符合這裡的設定，腳本才會運作。
* **格式：** 支援萬用字元 `*`，多個網域用逗號 `,` 分隔。
* **範例：**
* 如果你的網址是 `admin.company.com`，建議輸入 `*.company.com`
* 如果你有好幾個環境，輸入 `*.my-erp.com, *.internal-sys.net`
* 如果是內網 IP，輸入 `192.168.*`



> ✅ **設定完畢後，請按下 F5 重新整理網頁，左下角的標籤出現即代表成功！**

---

## ⚙️ 環境判斷邏輯

腳本會依據你設定的三種規則，自動切換顏色與防護等級：

| 設定項目 | 判斷邏輯 | 顯示標籤 | 防護等級 | 範例設定值 |
| --- | --- | --- | --- | --- |
| **1. 根網域 (Roots)** | **必須符合**此規則腳本才會啟動。<br>

<br>如果符合 Roots 但不符合下面兩者，預設判定為 **PROD**。 | `[ 🔴 PROD 正式區 ]` | **最高** 🛡️<br>

<br>(攔截刪除操作) | `*.aws.com` |
| **2. STG 網域** | 網址包含此關鍵字 | `[ 🟠 STG 測試區 ]` | 普通 (僅提示) | `stg, uat, test` |
| **3. DEV 網域** | 網址包含此關鍵字 | `[ 🔵 DEV 開發區 ]` | 普通 (僅提示) | `dev, localhost` |

**邏輯範例：**
假設你設定根網域為 `*.example.com`：

* `www.example.com` ➡️ **PROD** (因為是根網域，且沒對到 dev/stg) 🔴
* `stg.example.com` ➡️ **STG** 🟠
* `dev.example.com` ➡️ **DEV** 🔵
* `www.google.com` ➡️ **(腳本不啟動)**

---

## 📸 功能展示

### 1. 醒目的環境標籤

再也不用看著網址列發呆「我現在到底在哪一區？」。
標籤固定顯示於畫面**左下角**，點擊即可暫時隱藏。

### 2. 正式區刪除確認 (Anti-Hand-Slip)

在 **🔴 PROD 正式區**，當你點擊任何帶有 `delete`, `btn-danger` 樣式或名稱的按鈕時，腳本會強制攔截並跳出確認視窗：

```text
+--------------------------------------------------+
| ⚠️ 網頁顯示：                                      |
|                                                  |
| 【⚠️ 正式區操作確認】                               |
| 欲刪除：「重要客戶資料 (ID: 999)」                 |
|                                                  |
| 請輸入 DELETE 確認:                               |
| [ DELETE           ]                             |
|                                                  |
|        [ 取消 ]  [ 確定 ]                        |
+--------------------------------------------------+

```

> **只有輸入正確的 "DELETE" (全大寫) 才能放行，防止手滑誤點。**

---

## 🛠️ 進階功能

* **匯出/匯入設定**：
* 換電腦不用重新輸入，點擊「📤 匯出設定」會將設定轉為 JSON 複製到剪貼簿。
* 到新電腦點擊「📥 匯入設定」貼上即可。


* **自訂觸發按鈕**：
* 目前預設攔截的按鈕 class/id 關鍵字為：`btn_delete`, `deleteBtn`, `btn-danger`。
* (若需修改此規則，目前需編輯腳本原始碼中的 `config.btns` 區塊)。



---

## ❓ 常見問題 (FAQ)

### Q: 為什麼安裝後什麼事都沒發生？

**A:** 請檢查以下兩點：

1. **是否設定了「根網域」？** (參見上方快速教學，這是最常見的原因)
2. **是否開啟了開發者模式？** 如果你是新安裝的瀏覽器或 Tampermonkey (MV3 版本)，可能需要到擴充功能管理頁面開啟「開發人員模式」或「允許使用者指令碼 (Allow User Scripts)」。

### Q: 可以支援 IP 位址嗎？

**A:** 可以！在根網域設定中直接輸入 IP 即可，例如 `192.168.*`。

### Q: 標籤擋到我的按鈕了怎麼辦？

**A:** 直接點擊那個標籤，它就會消失（直到下次重新整理）。

---

## 🤝 參與貢獻 & 回報

如果你發現這個腳本救了你一命，或者你有更好的想法（例如想攔截更多種按鈕），歡迎到 GitHub 回報！

**License:** MIT

```

